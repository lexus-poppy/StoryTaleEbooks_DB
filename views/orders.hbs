<h1>Orders</h1>
<button type="button" onclick="window.location.reload()">Reset Page</button>

{{! READ table }}
<table id="orders-table">
    <thead>
        <tr>
            <th>Order ID</th>
            <th>Member (Customer)</th>
            <th>Coupon Applied</th>
            <th>Total Price</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        {{#each orders}}
        <tr data-value="{{this.orderID}}">
            <td>{{this.orderID}}</td>
            <td>{{this.firstName}} {{this.lastName}}</td>
            <td>{{#if this.couponDiscount}}${{this.couponDiscount}}{{else}}None{{/if}}</td>
            <td>${{this.totalPrice}}</td>
            <td>
                <button type="button" onclick="deleteOrder({{this.orderID}})">Delete</button>
            </td>
        </tr>
        {{/each}}
    </tbody>

    </table>

{{! CREATE form }}
<h2>Record New Order</h2>
<p>Select the member and the coupon (if applicable) to create a new order.</p>
<form action="/add-order-form" method="POST" id="add-order-form">
    
    <label for="memberIDInput">Member: </label>
    <select name="memberIDInput" id="memberIDInput" required>
        <option value="">Select a Member</option>
        {{#each members}}
        <option value="{{this.memberID}}">{{this.firstName}} {{this.lastName}}</option>
        {{/each}}
    </select>

    <label for="couponIDInput">Coupon: </label>
    <select name="couponIDInput" id="couponIDInput">
        <option value="NULL">No Coupon</option>
        {{#each coupons}}
        <option value="{{this.couponID}}">${{this.couponDiscount}} Off (Exp: {{this.expirationDate}})</option>
        {{/each}}
    </select>

    <label for="totalPriceInput">Total Price ($): </label>
    <input type="number" step="0.01" name="totalPriceInput" id="totalPriceInput" required />

    <input type="submit" value="Create Order">
</form>

{{! UPDATE form }}
<h2>Update Order Total</h2>
<form id="update-order-form">
    <label for="update_order_id">Order ID: </label>
    <select name="orderIDInput" id="update_order_id" required>
        <option value="" disabled selected>Select Order</option>
        {{#each orders}}
        <option value="{{this.orderID}}">Order #{{this.orderID}} - {{this.lastName}}</option>
        {{/each}}
    </select>

    <label for="update_totalPrice">New Total Price: </label>
    <input type="number" step="0.01" name="totalPriceInput" id="update_totalPrice" required />

    <input type="submit" value="Update Price">
</form>

<script src="./js/delete_order.js"></script>
<script src="./js/update_order.js"></script>

{{!--
        Citation for use of AI Tools:
        Date: 02/08/2026
        Prompts used to generate handlebars script
        Write a handlebars script for CS340 OSU Project 3 for the Coupon Entity from the DDL Database (pasted in prompt)
        AI Source URL: https://gemini.google.com/
        Links to an external site.
--}}

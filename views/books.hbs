<h1>Books</h1>

{{! READ table }}
<table>
    <thead>
        <tr>
            {{! For the table header row, we print the DB attribute names }}

            <th>ISBN</th>
            <th>Title</th>
            <th>Author</th>
            <th>Publisher</th>
            <th>Published Date</th>
            <th>Genre</th>
            <th>Book Cost</th>
        </tr>
    </thead>

    <tbody>
        {{#each books}}
        <tr>
            <td>{{this.isbn}}</td>
            <td>{{this.title}}</td>
            <td>{{this.author}}</td>
            <td>{{this.publisher}}</td>
            <td>{{this.publishedDate}}</td>
            <td>{{this.genre}}</td>
            <td>{{this.bookCost}}</td>
        </tr>
        {{/each}}
    </tbody>
</table>
<button type="button" onclick="window.location.reload()">Reset Page</button>

{{! CREATE form }}
<h2>Add a New Book</h2>
<form action="/books" method="POST" id="add-book-form">
    <label for='isbnInput'>ISBN: </label>
    <input type='text' name='isbnInput' id='isbnInput' autocomplete='off' required />

    <label for='titleInput'>Title: </label>
    <input type='text' name='titleInput' id='titleInput' autocomplete='off' required />

    <label for='authorInput'>Author: </label>
    <input type='text' name='authorInput' id='authorInput' autocomplete='off' required />

    <label for='publisherInput'>Publisher: </label>
    <input type='text' name='publisherInput' id='publisherInput' autocomplete='off' />

    <label for='publishedDateInput'>Published Date: </label>
    <input type='date' name='publishedDateInput' id='publishedDateInput' autocomplete='off' />

    <label for='genreInput'>Genre: </label>
    <input type='text' name='genreInput' id='genreInput' autocomplete='off' required />

    <label for="bookCostInput">Book Cost ($): </label>
    <input type="number" step="0.01" name="bookCostInput" id="bookCostInput" required/>

    <input type='submit' value="Add Book"/>
</form>

{{! UPDATE form }}
<h2>Update a Book</h2>
<form class='cuForm' id='update-book-form' method="POST" action="/books/update">

    <label for='update-isbn-select'>Book to Update (ISBN): </label>
    <select name='isbnInput' id='update-isbn-select' required>
        <option value='' disabled selected>-- Select a Book --</option>
        {{#each books}}
        {{! Note: use this.isbn (lowercase) if that is how it comes from your SELECT query }}
        <option value='{{this.isbn}}'
            data-title='{{this.title}}'
            data-author='{{this.author}}'
            data-publisher='{{this.publisher}}'
            data-publisheddate='{{this.publishedDate}}'
            data-genre='{{this.genre}}'
            data-bookcost='{{this.bookCost}}'>
            {{this.title}} ({{this.isbn}})
        </option>
        {{/each}}
    </select>

    <label for='update-title'>Title: </label>
    <input type='text' name='titleInput' id='update-title' autocomplete='off' required />

    <label for='update-author'>Author: </label>
    <input type='text' name='authorInput' id='update-author' autocomplete='off' required />

    <label for='update-publisher'>Publisher: </label>
    <input type='text' name='publisherInput' id='update-publisher' autocomplete='off' />

    <label for='update-publishedDate'>Published Date: </label>
    <input type='date' name='publishedDateInput' id='update-publishedDate' autocomplete='off' />

    <label for='update-genre'>Genre: </label>
    <input type='text' name='genreInput' id='update-genre' autocomplete='off' required />

    <label for="bookCostInput">Book Cost ($): </label>
    <input type="number" step="0.01" name="bookCostInput" id="bookCostInput" required />

    <input type='submit' value="Update Book"/>
</form>

{{! DELETE form }}
<h2>Delete a Book</h2>
<p>Warning: Deleting a book will also remove it from any existing orders.</p>
<form id="delete-book-form" method="POST" action="/books/delete">
    <label for="delete-isbn-select">Select Book to Delete: </label>
    <select name="isbnInput" id="delete-isbn-select" required>
        <option value="" disabled selected>-- Select a Book --</option>
        {{#each books}}
            {{! Note: use lowercase 'this.isbn' to match your app.get results }}
            <option value="{{this.isbn}}">
                {{this.title}} (ISBN: {{this.isbn}})
            </option>
        {{/each}}
    </select>
    
    <input type="submit" value="Delete Book" onclick="return confirm('Are you sure you want to permanently delete this book?')">
</form>

{{!--
        Citation for use of AI Tools:
        Date: 02/08/2026
        Prompts used to generate handlebars script
        Write a handlebars script for CS340 OSU Project 3 for the Coupon Entity from the DDL Database (pasted in prompt)
        AI Source URL: https://gemini.google.com/
        Links to an external site.
--}}

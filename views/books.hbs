<h1>Books</h1>

{{! READ table }}
<table>
    <thead>
        <tr>
            {{! For the table header row, we print the DB attribute names }}
            {{#each books.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        {{! For each row, print ISBN, title, author, publisher, publishedDate, and genre }}
        {{#each books}}
        <tr>
            <td>{{this.ISBN}}</td>
            <td>{{this.title}}</td>
            <td>{{this.author}}</td>
            <td>{{this.publisher}}</td>
            <td>{{this.publishedDate}}</td>
            <td>{{this.genre}}</td>
            <td>
                <button type="button" onclick="deleteBook('{{this.ISBN}}')">Delete</button>
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>

{{! CREATE form }}
<h2>Add a New Book</h2>
<form action="/add-book-form" method="POST" id="add-book-form">
    <label for='ISBN'>ISBN: </label>
    <input type='text' name='ISBN' id='ISBN' required />

    <label for='title'>Title: </label>
    <input type='text' name='title' id='title' required />

    <label for='author'>Author: </label>
    <input type='text' name='author' id='author' required />

    <label for='publisher'>Publisher: </label>
    <input type='text' name='publisher' id='publisher' />

    <label for='publishedDate'>Published Date: </label>
    <input type='date' name='publishedDate' id='publishedDate' />

    <label for='genre'>Genre: </label>
    <input type='text' name='genre' id='genre' required />

    <input type='submit' value="Add Book"/>
</form>

{{! UPDATE form }}
<h2>Update a Book</h2>
<p>To update a book, select its title from the dropdown and update the fields below.</p>
<form class='cuForm' id='update-book-form'>
    <label for='update_isbn'>Book to Update: </label>
    <select name='update_isbn' id='update_isbn' required>
        <option value='' disabled selected>Select a Book</option>
        {{#each books}}
        <option value='{{this.ISBN}}'>{{this.title}} ({{this.ISBN}})</option>
        {{/each}}
    </select>

    <label for='update_title'>New Title: </label>
    <input type='text' name='update_title' id='update_title' />

    <label for='update_genre'>New Genre: </label>
    <input type='text' name='update_genre' id='update_genre' />

    <input type='submit' value="Update Book"/>
</form>

<script src="./public/update_book.js"></script>
<script src="./public/delete_book.js"></script>

{{!--
        Citation for use of AI Tools:
        Date: 02/08/2026
        Prompts used to generate handlebars script
        Write a handlebars script for CS340 OSU Project 3 for the Books Entity from the DDL Database (pasted in prompt)
        AI Source URL: https://gemini.google.com/
        Links to an external site.
--}}
